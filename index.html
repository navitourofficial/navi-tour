<!DOCTYPE html>
<html lang="ko">
<head>
  <!-- ✅ GitHub Pages용 동적 BASE 설정 -->
  <script>
    (function () {
      const seg = location.pathname.split('/').filter(Boolean);
      const base = (location.hostname.endsWith('.github.io') && seg.length > 0)
        ? '/' + seg[0] + '/'   // 프로젝트 페이지: "/repo/"
        : '/';                 // 로컬/사용자페이지: "/"
      const b = document.createElement('base');
      b.setAttribute('href', base);
      document.head.prepend(b);
    })();
  </script>

  <!-- ✅ layout.html 로더 (헤더/전체메뉴/푸터 자동 포함) -->
  <script>
    (async function injectLayout() {
      try {
        const res = await fetch('layout/layout.html', { cache: 'no-store' });
        const html = await res.text();
        const doc  = new DOMParser().parseFromString(html, 'text/html');

        const $headerTpl = doc.getElementById('layout-header');
        const $footerTpl = doc.getElementById('layout-footer');
        const $scriptTpl = doc.getElementById('layout-script');

        const headerFrag = $headerTpl ? $headerTpl.content.cloneNode(true) : null;
        const footerFrag = $footerTpl ? $footerTpl.content.cloneNode(true) : null;

        const main = document.querySelector('main');
        if (headerFrag) {
          if (main) document.body.insertBefore(headerFrag, main);
          else document.body.prepend(headerFrag);
        }
        if (footerFrag) document.body.appendChild(footerFrag);

        if ($scriptTpl) {
          const inline = $scriptTpl.content.querySelector('script');
          if (inline) {
            const s = document.createElement('script');
            s.textContent = inline.textContent;
            document.body.appendChild(s);
          }
        }
      } catch (e) {
        console.error('layout include failed:', e);
      }
    })();
  </script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>NAVI TOUR</title>
 <link rel="stylesheet" href="main/style.css">


  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Noto+Sans+KR:wght@300;400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

  <style>
    :root{
      --ink:#0e1f2c; --muted:#5f6b77; --line:#e7ebf0;
      --brand:#044b7d; --brand-d:#033c63; --bg:#f7f8fb; --card:#fff;
      --gold:#c6a24a; --shadow:0 12px 28px rgba(0,0,0,.08);
      --container-w:1200px;          /* 본문 컨테이너 폭 */
      --half:600px;                  /* 컨테이너 반폭 */
      --sticky-offset:80px;          /* 헤더 보정 (JS에서 갱신) */
    }
    *{box-sizing:border-box}
    body{font-family:'Noto Sans KR',sans-serif;color:var(--ink);background:#fff;}
    main{max-width:var(--container-w);margin:0 auto;padding:20px;}

    /* Hero */
    .hero{border-radius:18px;overflow:hidden;min-height:340px;color:#fff;
      background:linear-gradient(180deg,rgba(0,0,0,.55),rgba(0,0,0,.35)),url('image/bukgando_card/banner_bukgando.png') center/cover no-repeat;
      display:grid;place-items:center;text-align:center;box-shadow:var(--shadow);}
    .hero h1{font-family:'Playfair Display',serif;font-size:2.8rem;margin:0 0 6px;}
    .hero p{margin:0;opacity:.9}

    /* Concierge box */
    .concierge{
      margin-top:-30px;display:flex;align-items:center;gap:14px;background:#fff;
      border:1px solid var(--line);border-radius:14px;box-shadow:var(--shadow);
      padding:14px 18px;}
    .concierge i{color:var(--gold);font-size:1.3rem}
    .concierge .txt{flex:1}
    .concierge .cta{
      background:var(--gold);border:none;border-radius:10px;padding:10px 16px;color:#fff;font-weight:700;text-decoration:none}
    .concierge .cta:hover{background:#b18c32}

    /* 본문 3열 그리드 */
    .grid3{
      display:grid;
      grid-template-columns:repeat(3, minmax(0, 1fr));
      gap:18px;
      margin-top:28px;
    }
    @media (max-width:1024px){ .grid3{grid-template-columns:repeat(2,1fr);} }
    @media (max-width:640px){ .grid3{grid-template-columns:1fr;} }

    /* 카드 */
    .card{background:#fff;border:1px solid var(--line);border-radius:14px;overflow:hidden;box-shadow:var(--shadow);transition:.2s;}
    .card:hover{transform:translateY(-4px);}
    .thumb img{width:100%;aspect-ratio:16/10;object-fit:cover;display:block}
    .body{padding:14px;}
    .body h3{margin:0;font-size:1.1rem;}
    .body p{margin:6px 0;color:var(--muted);font-size:.9rem;}
    .tags{display:flex;flex-wrap:wrap;gap:6px;margin:8px 0;}
    .tag{border:1px solid #d9e0e7;border-radius:999px;padding:6px 10px;font-size:.85rem;color:#22303f;background:#fafbfd;}
    .tag i{margin-right:4px;color:#1f74b5;}
    .meta{display:flex;justify-content:space-between;align-items:center;margin-top:6px;}
    .price{font-weight:800;color:var(--brand);}
    .actions{display:flex;gap:8px;margin-top:10px;}
    .actions a{padding:8px 12px;border-radius:10px;text-decoration:none;font-size:.9rem;}
    .btn-ghost{border:1px solid #d9e0e7;background:#fff;color:#1c2b38;}
    .btn-main{border:1px solid var(--brand-d);background:var(--brand);color:#fff;}
    .add{margin-top:6px;font-size:.85rem;color:#687583;}

    /* 우측 여백 고정 필터 (컨테이너 바깥) */
    .side-filter{
      position:fixed;
      left: calc(50% + var(--half) + (100vw - var(--container-w))/4);
      transform: translateX(-50%);
      top: calc(var(--sticky-offset) + 8px);
      width: 260px;
      background:#fff;border:1px solid var(--line);border-radius:14px;box-shadow:var(--shadow);
      padding:14px; z-index: 900;
    }
    .side-filter h3{font-size:1.05rem;margin:0 0 10px;}
    .field{display:flex;flex-direction:column;gap:4px;margin-bottom:10px}
    .sel,.ipt{padding:10px 12px;border:1px solid #d9e0e7;border-radius:10px;}
    .chips{display:flex;flex-wrap:wrap;gap:6px}
    .chip{padding:7px 12px;border:1px solid #d9e0e7;border-radius:999px;cursor:pointer;font-size:.9rem;color:#22303f;background:#fff}
    .chip.active{background:var(--brand);color:#fff;border-color:var(--brand-d)}
    .btn-apply{width:100%;padding:10px 0;background:var(--brand);border:none;border-radius:10px;color:#fff;font-weight:700;margin-top:6px}

    main{ padding-right: 20px; }
    @media (max-width:1400px){
      .side-filter{left:auto; right:20px; transform:none;}
      main{padding-right:300px;}
    }
    @media (max-width:960px){
      .side-filter{position:static; width:auto; margin:14px 0 0 0;}
      main{padding-right:20px;}
    }

    .bottom-box{
      margin:28px 0 40px; padding:20px;border:1px solid var(--line);
      background:#f9fafc;border-radius:14px;display:flex;align-items:center;justify-content:space-between;gap:10px;}
    .bottom-box b{color:#123a59}
    .bottom-box .btns{display:flex;gap:8px;}
    .bottom-box a{padding:10px 16px;border-radius:10px;text-decoration:none;font-weight:700;}
    .bottom-box .ask{background:var(--brand);color:#fff;}
    .bottom-box .pdf{background:#fff;color:#1e2b38;border:1px solid #d9e0e7;}
  </style>
</head>
<body>
  <main>
    <!-- Hero -->
    <section class="hero">
      <div>
                <h1>NAVI TOUR</h1>
                <p>당신의 다음 비상을 위한 이정표</p>
      </div>
    </section>

    <!-- 콘시어지 배정 서비스 박스 -->
    <div class="concierge">
      <i class="fa-solid fa-headset"></i>
      <div class="txt">
        <strong>콘시어지 배정 서비스</strong><br>
        전 일정 1:1 어시스트 · 호텔 업그레이드 상담 · 미식 라인업 커스터마이징
      </div>
      <a href="#" class="cta">상담 예약</a>
    </div>

    <!-- 상품 3열 리스트 -->
    <section class="grid3" id="list">
      <!-- ⚠️ 외부 파일(/main/main.products.html)에서 카드가 주입됩니다 -->
    </section>

    <!-- 하단 맞춤 안내 박스 -->
    <div class="bottom-box">
      <span><b>단체·학교·기업 대상</b> 맞춤형 일정 가능합니다. NAVI TOUR와 함께 당신만의 역사기행을 설계해 보세요.</span>
      <div class="btns">
        <a href="#" class="ask"><i class="fa-regular fa-comment-dots"></i> 문의하기</a>
        <a href="#" class="pdf"><i class="fa-regular fa-file-lines"></i> PDF 견적서</a>
      </div>
    </div>
  </main>

  <!-- 우측 여백 고정 필터 -->
  <aside id="sideFilter" class="side-filter">
    <h3>상품 필터</h3>
    <div class="field"><label>지역</label>
      <select class="sel" id="f-region">
        <option value="all">전체</option>
        <option value="seogando">서간도</option>
        <option value="bukgando">북간도</option>
      </select>
    </div>
    <div class="field"><label>기간</label>
      <select class="sel" id="f-days">
        <option value="all">전체</option>
        <option value="3">3박4일</option>
        <option value="4">4박5일</option>
        <option value="5">5박6일</option>
      </select>
    </div>
    <div class="field"><label>키워드</label>
      <input type="search" class="ipt" id="q" placeholder="예: 윤동주, 봉오동" />
    </div>
    <div class="field"><label>테마</label>
      <div class="chips" id="chips">
        <div class="chip active" data-theme="all">전체</div>
        <div class="chip" data-theme="independence">독립운동</div>
        <div class="chip" data-theme="literature">문학</div>
        <div class="chip" data-theme="family">가족</div>
      </div>
    </div>
    <button class="btn-apply" id="apply">필터 적용</button>
  </aside>

  <script>
    function placeRightFilter(){
      const mainNav = document.querySelector('.main-nav');
      const subNav  = document.querySelector('.sub-nav');
      const header  = document.querySelector('header');
      const box     = document.getElementById('sideFilter');
      if(!box) return;

      let headerHeight = ((mainNav && mainNav.offsetHeight) || 0) + ((subNav && subNav.offsetHeight) || 0);
      if(!headerHeight) headerHeight = (header && header.offsetHeight) || 0;

      const OFFSET = Math.max(5, headerHeight);
      document.documentElement.style.setProperty('--sticky-offset', OFFSET + 'px');
      box.style.top = `calc(var(--sticky-offset) + 8px)`;
    }
    window.addEventListener('load', placeRightFilter);
    window.addEventListener('resize', placeRightFilter);
    window.addEventListener('scroll', placeRightFilter);

    /* ---------- 외부 상품 카드 로딩 + 간단 필터 ---------- */
    const list      = document.getElementById('list');
    let cards       = [];
    const fR        = document.getElementById('f-region');
    const fD        = document.getElementById('f-days');
    const q         = document.getElementById('q');
    const chips     = document.getElementById('chips');
    const applyBtn  = document.getElementById('apply');
    let __productsLoaded = false;

    async function loadProducts(){
      if (__productsLoaded) return;
      try{
        // ✅ 경로 수정됨: ../main/main.products.html
        const res  = await fetch('main/main.products.html', { cache: 'no-store' });
        if (!res.ok) throw new Error('main.products.html 로드 실패 ('+res.status+')');

        const html = await res.text();
        const doc  = new DOMParser().parseFromString(html, 'text/html');
        const tpl  = doc.getElementById('main-products');
        if(!tpl){ console.warn('main-products template not found.'); return; }

        list.innerHTML = '';
        list.appendChild(tpl.content.cloneNode(true));

        cards = Array.from(list.querySelectorAll('.card'));
        __productsLoaded = true;
        applyFilter();
      }catch(e){
        console.error('Failed to load products:', e);
        list.innerHTML = `<div style="padding:40px;text-align:center;color:#888;">상품 정보를 불러오지 못했습니다.<br>${e.message}</div>`;
      }
    }

    function applyFilter(){
      const region = fR.value;
      const days   = fD.value;
      const theme  = chips.querySelector('.chip.active')?.dataset.theme || 'all';
      const kw     = q.value.trim().toLowerCase();

      cards.forEach(c=>{
        const okR = (region==='all' || c.dataset.region===region);
        const okD = (days==='all'   || c.dataset.days===days);
        const okT = (theme==='all'  || c.dataset.theme===theme);
        const okK = !kw || (c.innerText.toLowerCase().includes(kw));
        c.style.display = (okR && okD && okT && okK) ? '' : 'none';
      });
    }

    chips.addEventListener('click', e=>{
      const chip = e.target.closest('.chip');
      if(!chip) return;
      chips.querySelectorAll('.chip').forEach(x=>x.classList.remove('active'));
      chip.classList.add('active');
    });
    applyBtn.addEventListener('click', applyFilter);
    fR.addEventListener('change', applyFilter);
    fD.addEventListener('change', applyFilter);
    q.addEventListener('keydown', e=>{ if(e.key==='Enter') applyFilter(); });

    window.addEventListener('DOMContentLoaded', loadProducts);
    window.applyFilter = applyFilter;
    window.cards = cards;
  </script>

          <!-- ====================== 2-3. 인용문(후기) 섹션 ====================== -->
        <section class="quote-section">
            <p>"그 길을 걸으며, 나는 다시 한 번 조국을 사랑하는 법을 배웠다."</p> 
            <div class="author-info">
                <div class="signature">윤동주 시인</div> 
                <div class="author-image-placeholder"></div> 
                <div class="location">대한민국</div> 
            </div>
        </section>
    </main>

</body>
</html>
