<!DOCTYPE html>
<html lang="ko">
<head>
  <!-- ✅ GitHub Pages용 동적 BASE 설정 -->
  <script>
    (function () {
      const seg = location.pathname.split('/').filter(Boolean);
      const base = (location.hostname.endsWith('.github.io') && seg.length > 0)
        ? '/' + seg[0] + '/'   // 프로젝트 페이지: "/repo/"
        : '/';                 // 로컬/사용자페이지: "/"
      const b = document.createElement('base');
      b.setAttribute('href', base);
      document.head.prepend(b);
    })();
  </script>

  <!-- ✅ layout.html 로더 (헤더/전체메뉴/푸터/콘텐츠 블록 자동 포함) -->
  <script>
    (async function injectLayout() {
      try {
        const res = await fetch('layout/layout.html', { cache: 'no-store' });
        const html = await res.text();
        const doc  = new DOMParser().parseFromString(html, 'text/html');

        const $headerTpl   = doc.getElementById('layout-header');
        const $footerTpl   = doc.getElementById('layout-footer');
        const $scriptTpl   = doc.getElementById('layout-script');
        const $concTpl     = doc.getElementById('layout-concierge');      // 👈 추가
        const $bottomTpl   = doc.getElementById('layout-bottom-cta');     // 👈 추가

        const headerFrag = $headerTpl ? $headerTpl.content.cloneNode(true) : null;
        const footerFrag = $footerTpl ? $footerTpl.content.cloneNode(true) : null;
        const concFrag   = $concTpl ? $concTpl.content.cloneNode(true) : null;
        const bottomFrag = $bottomTpl ? $bottomTpl.content.cloneNode(true) : null;

        const main = document.querySelector('main');
        if (headerFrag) {
          if (main) document.body.insertBefore(headerFrag, main);
          else document.body.prepend(headerFrag);
        }
        if (footerFrag) document.body.appendChild(footerFrag);

        // 👇 슬롯에 컴포넌트 삽입
        const concSlot   = document.getElementById('concierge-slot');
        const bottomSlot = document.getElementById('bottom-cta-slot');
        if (concSlot && concFrag) concSlot.replaceWith(concFrag);
        if (bottomSlot && bottomFrag) bottomSlot.replaceWith(bottomFrag);

        if ($scriptTpl) {
          const inline = $scriptTpl.content.querySelector('script');
          if (inline) {
            const s = document.createElement('script');
            s.textContent = inline.textContent;
            document.body.appendChild(s);
          }
        }
      } catch (e) {
        console.error('layout include failed:', e);
      }
    })();
  </script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>NAVI TOUR</title>
 <link rel="stylesheet" href="main/style.css">


  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Noto+Sans+KR:wght@300;400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

  <style>
    :root{
      --ink:#0e1f2c; --muted:#5f6b77; --line:#e7ebf0;
      --brand:#044b7d; --brand-d:#033c63; --bg:#f7f8fb; --card:#fff;
      --gold:#c6a24a; --shadow:0 12px 28px rgba(0,0,0,.08);
      --container-w:1200px;          /* 본문 컨테이너 폭 */
      --half:600px;                  /* 컨테이너 반폭 */
      --sticky-offset:80px;          /* 헤더 보정 (JS에서 갱신) */
    }
    *{box-sizing:border-box}
    body{font-family:'Noto Sans KR',sans-serif;color:var(--ink);background:#fff;}
    main{max-width:var(--container-w);margin:0 auto;padding:20px;}

    /* Hero */
    .hero{border-radius:18px;overflow:hidden;min-height:340px;color:#fff;
      background:linear-gradient(180deg,rgba(0,0,0,.55),rgba(0,0,0,.35)),url('image/bukgando_card/banner_bukgando.png') center/cover no-repeat;
      display:grid;place-items:center;text-align:center;box-shadow:var(--shadow);}
    .hero h1{font-family:'Playfair Display',serif;font-size:2.8rem;margin:0 0 6px;}
    .hero p{margin:0;opacity:.9}

    /* 본문 3열 그리드 */
/* 본문 그리드: 모바일 1 → 태블릿 2 → 랩톱 3 → 데스크톱 4 */
.grid3{
  display:grid;
  gap:18px;
  margin-top:28px;
  grid-template-columns: 1fr;               /* 기본(모바일): 1열 */
}

@media (min-width:640px){
  .grid3{ grid-template-columns: repeat(2, 1fr); } /* 태블릿: 2열 */
}
@media (min-width:1024px){
  .grid3{ grid-template-columns: repeat(3, 1fr); } /* 랩톱: 3열 */
}
@media (min-width:1280px){
  .grid3{ grid-template-columns: repeat(4, 1fr); } /* 데스크톱: 4열 */
}

    .card{background:#fff;border:1px solid var(--line);border-radius:14px;overflow:hidden;box-shadow:var(--shadow);transition:.2s;}
    .card:hover{transform:translateY(-4px);}
    .thumb img{width:100%;aspect-ratio:16/10;object-fit:cover;display:block}
    .body{padding:14px;}
    .body h3{margin:0;font-size:1.1rem;}
    .body p{margin:6px 0;color:var(--muted);font-size:.9rem;}
    .tags{display:flex;flex-wrap:wrap;gap:6px;margin:8px 0;}
    .tag{border:1px solid #d9e0e7;border-radius:999px;padding:6px 10px;font-size:.85rem;color:#22303f;background:#fafbfd;}
    .tag i{margin-right:4px;color:#1f74b5;}
    .meta{display:flex;justify-content:space-between;align-items:center;margin-top:6px;}
    .price{font-weight:800;color:var(--brand);}
    .actions{display:flex;gap:8px;margin-top:10px;}
    .actions a{padding:8px 12px;border-radius:10px;text-decoration:none;font-size:.9rem;}
    .btn-ghost{border:1px solid #d9e0e7;background:#fff;color:#1c2b38;}
    .btn-main{border:1px solid var(--brand-d);background:var(--brand);color:#fff;}
    .add{margin-top:6px;font-size:.85rem;color:#687583;}

    /* 우측 여백 고정 필터 (컨테이너 바깥) */
    .side-filter{
      position:fixed;
      left: calc(50% + var(--half) + (100vw - var(--container-w))/4);
      transform: translateX(-50%);
      top: calc(var(--sticky-offset) + 8px);
      width: 260px;
      background:#fff;border:1px solid var(--line);border-radius:14px;box-shadow:var(--shadow);
      padding:14px; z-index: 900;
    }
    .side-filter h3{font-size:1.05rem;margin:0 0 10px;}
    .field{display:flex;flex-direction:column;gap:4px;margin-bottom:10px}
    .sel,.ipt{padding:10px 12px;border:1px solid #d9e0e7;border-radius:10px;}
    .chips{display:flex;flex-wrap:wrap;gap:6px}
    .chip{padding:7px 12px;border:1px solid #d9e0e7;border-radius:999px;cursor:pointer;font-size:.9rem;color:#22303f;background:#fff}
    .chip.active{background:var(--brand);color:#fff;border-color:var(--brand-d)}
    .btn-apply{width:100%;padding:10px 0;background:var(--brand);border:none;border-radius:10px;color:#fff;font-weight:700;margin-top:6px}

    main{ padding-right: 20px; }
    @media (max-width:1400px){
      .side-filter{left:auto; right:20px; transform:none;}
      main{padding-right:300px;}
    }
    @media (max-width:960px){
      .side-filter{position:static; width:auto; margin:14px 0 0 0;}
      main{padding-right:20px;}
    }
    /* ================== 4열(≥1280px) 비율 보정 오버라이드 ================== */
@media (min-width:1280px){
  /* 4열에서 카드 간격, 모서리 */
  .grid3{ gap:14px; }                /* 기존 18px → 14px */
  .card{ border-radius:12px; }       /* 살짝 더 컴팩트 */

  /* 썸네일: 세로 조금 더 확보(텍스트 공간 줄었으니 시각 밸런스 보정) */
  .thumb img{
    aspect-ratio: 16 / 10;           /* 기존 16/10 → 약간 더 세로 */
    object-fit: cover;
    display: block;
  }

  /* 카드 내부 패딩/타이포 컴팩트 */
  .body{ padding:8px; }             /* 기존 14px → 12px */
  .body h3{
    font-size: 1rem;                 /* 제목 1.10rem → 1.00rem */
    line-height: 1.35;
    letter-spacing: -0.2px;
    margin: 0;
  }
  .body p{
    font-size: .7rem;               /* 본문 0.9rem → 0.85rem */
    margin: 4px 0;
    color: var(--muted);
  }

  /* 태그칩 컴팩트 */
  .tags{ gap:6px; margin:6px 0; }
  .tag{
    padding: 5px 8px;                /* 6px 10px → 5px 8px */
    font-size: .60rem;               /* 0.85rem → 0.80rem */
  }
  .tag i{ margin-right:4px; }

  /* 액션 영역(버튼/가격) 컴팩트 */
  .actions{ gap:6px; margin-top:8px; }
  .actions a{
    padding: 7px 10px;               /* 8px 12px → 7px 10px */
    font-size: .72rem;               /* 0.9rem → 0.85rem */
    border-radius: 8px;              /* 10px → 8px */
  }
  .price{
    font-size: .95rem;               /* 약간 축소 */
    font-weight: 800;
  }
/* ================== 액션버튼 + 가격 정렬 보정 ================== */
@media (min-width:1280px){
  .actions{
    display: flex;
    align-items: center;       /* ✅ 세로 중앙정렬 */
    justify-content: space-between; /* 버튼묶음 왼쪽, 가격 오른쪽 */
    gap: 6px;
    margin-top: 8px;
  }

  .actions a{
    padding: 7px 10px;         /* ✅ 세로크기 줄임 (기존 8px → 6px) */
    font-size: 0.85rem;
    line-height: 1;
    border-radius: 8px;
  }

  /* 버튼 2개 묶음은 왼쪽 정렬, 가격은 오른쪽 붙게 */
  .actions a + a {
    margin-right: auto;        /* ✅ 두 번째 버튼 이후 자동으로 왼쪽 정렬 유지 */
  }

  .price{
    margin-left: auto;         /* ✅ 오른쪽 끝으로 밀기 */
    font-weight: 800;
    color: var(--brand);
    font-size: 0.95rem;
    line-height: 1;            /* ✅ 버튼 높이와 시각적으로 맞춤 */
    align-self: center;        /* ✅ 수직 중앙정렬 (플렉스 기준) */
  }
}

  /* 추가 설명(보조 텍스트) */
  .add{
    font-size: .60rem;               /* 0.85rem → 0.80rem */
    margin-top: 4px;
    color:#687583;
  }

  /* 우측 필터도 살짝 축소(4열 공간 확보 + 균형) */
  .side-filter{
    width: 240px;                    /* 260px → 240px */
    padding: 12px;                   /* 14px → 12px */
  }
  .side-filter h3{ font-size: 1rem; margin-bottom: 8px; }
  .field{ gap:4px; margin-bottom: 8px; }
  .sel,.ipt{ padding: 9px 10px; font-size: .95rem; border-radius: 9px; }
  .chips{ gap:6px; }
  .chip{
    padding: 6px 10px;               /* 7px 12px → 6px 10px */
    font-size: .85rem;
  }
  .btn-apply{
    padding: 9px 0;                  /* 10px → 9px */
    font-size: .95rem;
    border-radius: 9px;
  }
}

  </style>
</head>
<body>
  <main>
    <!-- Hero -->
    <section class="hero">
      <div>
        <h1>NAVI TOUR</h1>
        <p>당신의 다음 비상을 위한 이정표</p>
      </div>
    </section>

    <!-- 🔽 콘시어지 배정 서비스 (레이아웃에서 주입) -->
    <div id="concierge-slot"></div>

    <!-- 상품 3열 리스트 -->
    <section class="grid3" id="list">
      <!-- ⚠️ 외부 파일(/main/main.products.html)에서 카드가 주입됩니다 -->
    </section>

    <!-- 🔽 하단 맞춤 안내 박스 (레이아웃에서 주입) -->
    <div id="bottom-cta-slot"></div>

  <!-- 우측 여백 고정 필터 -->
  <aside id="sideFilter" class="side-filter">
    <h3>상품 필터</h3>
    <div class="field"><label>지역</label>
      <select class="sel" id="f-region">
        <option value="all">전체</option>
        <option value="seogando">서간도</option>
        <option value="bukgando">북간도</option>
      </select>
    </div>
    <div class="field"><label>기간</label>
      <select class="sel" id="f-days">
        <option value="all">전체</option>
        <option value="3">3박4일</option>
        <option value="4">4박5일</option>
        <option value="5">5박6일</option>
      </select>
    </div>
    <div class="field"><label>키워드</label>
      <input type="search" class="ipt" id="q" placeholder="예: 윤동주, 봉오동" />
    </div>
    <div class="field"><label>테마</label>
      <div class="chips" id="chips">
        <div class="chip active" data-theme="all">전체</div>
        <div class="chip" data-theme="independence">독립운동</div>
        <div class="chip" data-theme="literature">문학</div>
        <div class="chip" data-theme="family">가족</div>
      </div>
    </div>
    <button class="btn-apply" id="apply">필터 적용</button>
  </aside>

  <script>
    function placeRightFilter(){
      const mainNav = document.querySelector('.main-nav');
      const subNav  = document.querySelector('.sub-nav');
      const header  = document.querySelector('header');
      const box     = document.getElementById('sideFilter');
      if(!box) return;

      let headerHeight = ((mainNav && mainNav.offsetHeight) || 0) + ((subNav && subNav.offsetHeight) || 0);
      if(!headerHeight) headerHeight = (header && header.offsetHeight) || 0;

      const OFFSET = Math.max(5, headerHeight);
      document.documentElement.style.setProperty('--sticky-offset', OFFSET + 'px');
      box.style.top = `calc(var(--sticky-offset) + 8px)`;
    }
    window.addEventListener('load', placeRightFilter);
    window.addEventListener('resize', placeRightFilter);
    window.addEventListener('scroll', placeRightFilter);

    /* ---------- 외부 상품 카드 로딩 + 간단 필터 ---------- */
    const list      = document.getElementById('list');
    let cards       = [];
    const fR        = document.getElementById('f-region');
    const fD        = document.getElementById('f-days');
    const q         = document.getElementById('q');
    const chips     = document.getElementById('chips');
    const applyBtn  = document.getElementById('apply');
    let __productsLoaded = false;

    async function loadProducts(){
      if (__productsLoaded) return;
      try{
        // ✅ 경로 수정됨: ../main/main.products.html
        const res  = await fetch('main/main.products.html', { cache: 'no-store' });
        if (!res.ok) throw new Error('main.products.html 로드 실패 ('+res.status+')');

        const html = await res.text();
        const doc  = new DOMParser().parseFromString(html, 'text/html');
        const tpl  = doc.getElementById('main-products');
        if(!tpl){ console.warn('main-products template not found.'); return; }

        list.innerHTML = '';
        list.appendChild(tpl.content.cloneNode(true));

        cards = Array.from(list.querySelectorAll('.card'));
        __productsLoaded = true;
        applyFilter();
      }catch(e){
        console.error('Failed to load products:', e);
        list.innerHTML = `<div style="padding:40px;text-align:center;color:#888;">상품 정보를 불러오지 못했습니다.<br>${e.message}</div>`;
      }
    }

    function applyFilter(){
      const region = fR.value;
      const days   = fD.value;
      const theme  = chips.querySelector('.chip.active')?.dataset.theme || 'all';
      const kw     = q.value.trim().toLowerCase();

      cards.forEach(c=>{
        const okR = (region==='all' || c.dataset.region===region);
        const okD = (days==='all'   || c.dataset.days===days);
        const okT = (theme==='all'  || c.dataset.theme===theme);
        const okK = !kw || (c.innerText.toLowerCase().includes(kw));
        c.style.display = (okR && okD && okT && okK) ? '' : 'none';
      });
    }

    chips.addEventListener('click', e=>{
      const chip = e.target.closest('.chip');
      if(!chip) return;
      chips.querySelectorAll('.chip').forEach(x=>x.classList.remove('active'));
      chip.classList.add('active');
    });
    applyBtn.addEventListener('click', applyFilter);
    fR.addEventListener('change', applyFilter);
    fD.addEventListener('change', applyFilter);
    q.addEventListener('keydown', e=>{ if(e.key==='Enter') applyFilter(); });

    window.addEventListener('DOMContentLoaded', loadProducts);
    window.applyFilter = applyFilter;
    window.cards = cards;
  </script>

          <!-- ====================== 2-3. 인용문(후기) 섹션 ====================== -->
        <section class="quote-section">
            <p>"그 길을 걸으며, 나는 다시 한 번 조국을 사랑하는 법을 배웠다."</p> 
            <div class="author-info">
                <div class="signature">윤동주 시인</div> 
                <div class="author-image-placeholder"></div> 
                <div class="location">대한민국</div> 
            </div>
        </section>
    </main>

</body>
</html>
